在此 Git repo 產出可部署到 Ubuntu 24.04 的 MVP：Yocto Auto Build Web。
目標部署路徑：Ubuntu /opt/autobuild（程式碼）、jobs 目錄 /srv/autobuild/jobs/<job_id>/。

功能需求：

FastAPI + Jinja2，提供頁面：

GET /login：登入頁

POST /login：使用 PAM 驗證 Linux user/password（只在 Linux 執行）

GET/POST /settings：設定 GitLab PAT，寫到該使用者 home 的 ~/.autobuild/gitlab_token（目錄 700、檔案 600）

GET /new：建立 job 表單

POST /new：建立 job

GET /jobs/{job_id}：顯示 job 狀態 + 即時 log + artifacts

Session：用 signed cookie（Starlette SessionMiddleware），保存 username。

Jobs：用 sqlite（檔案路徑預設 /srv/autobuild/data/jobs.db，可用環境變數覆寫）。Job 欄位：id, owner, repo_url, ref, machine, target, status(PENDING/RUNNING/SUCCESS/FAILED), created_at, started_at, finished_at, exit_code。

建立 job 後，後端非同步啟動 runner：
sudo -u <owner> /opt/autobuild/runner/run_job.sh <job_id> <repo_url> <ref> <machine> <target>
後端需把 status 改 RUNNING、完成後更新 SUCCESS/FAILED（你可以用 polling：讀取 job 目錄下 status.json 或 exit_code 檔案）。

Log：runner 必須將所有輸出 append 到 /srv/autobuild/jobs/<job_id>/logs/build.log。
後端提供 SSE：GET /api/jobs/{job_id}/log/stream，即時 tail build.log（沒有新資料時 sleep）。

Artifacts：runner 完成後複製以下檔案到 /srv/autobuild/jobs/<job_id>/artifacts/：

build/tmp/deploy/images/<machine>/*.bin

build/tmp/deploy/images/<machine>/*.mtd
找不到不要當錯誤。
後端提供：

GET /api/jobs/{job_id}/artifacts：列出檔案（name, size, mtime）

GET /api/jobs/{job_id}/artifacts/{name}：下載（必須防 path traversal）

Git clone：runner 使用 HTTPS + PAT，PAT 從 ~/.autobuild/gitlab_token 讀取，並使用 GIT_ASKPASS 方式，避免 token 出現在 command line。

產出檔案（請直接建立並填內容）：

app/main.py, app/auth.py, app/db.py, app/jobs.py, app/config.py

templates/login.html, settings.html, new_job.html, job.html

static/app.js（包含 SSE 顯示 log、刷新 artifacts）

runner/run_job.sh（bash，LF）

systemd/autobuild.service（LF）

nginx/autobuild.conf（LF）

README.md：Ubuntu 部署步驟（建立 autobuild user、sudoers 只允許 run_job.sh、venv 安裝 requirements、systemd/nginx 啟用、每位使用者放 token 檔案）。

實作要求：

所有 Linux 相關檔案必須是 LF。

runner 需要 set -euo pipefail，並寫入 job 狀態檔（例如 /srv/autobuild/jobs/<job_id>/status.json，包含 status/exit_code/finished_at），供後端更新狀態。

以「可運作優先」完成 MVP，不需做 OAuth、也不需做強資安。