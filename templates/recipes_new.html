{% extends "_layout.html" %}
{% block title %}Recipe Template{% endblock %}
{% block content %}
<h1>Recipe Template</h1>
{% if error %}<p class="error">{{ error }}</p>{% endif %}
<div class="card">
    <form method="post" action="/recipes/new" class="flex" style="flex-direction:column;gap:0.75rem;max-width:860px;">
        <div class="flex" style="gap:1rem;flex-wrap:wrap;">
            <label style="flex:1;min-width:220px;">Platform
                <input type="text" name="platform" value="{{ platform or '' }}" required placeholder="e.g. ast2600evb">
            </label>
            <label style="flex:1;min-width:220px;">Project
                <input type="text" name="project" value="{{ project or '' }}" required placeholder="e.g. base">
            </label>
        </div>
        <label>Recipe YAML (raw text; saved exactly as authored)
            <textarea name="recipe_yaml" rows="22" style="font-family:monospace;" required>{{ recipe_yaml or '' }}</textarea>
        </label>
        <p class="status" style="color:#444;">Tips: runner supports clone_block/init_block/build_block/workdir; include meta-ami/github-gitlab-url.sh, set TEMPLATECONF, and edit conf/local.conf inside init_block while it runs.</p>
        <p class="status">Note: Existing recipe with same platform/project will be overwritten.</p>
        <button type="submit">Save Template</button>
    </form>
</div>
{% endblock %}
