{% extends "_layout.html" %}
{% block title %}GitLab Token{% endblock %}
{% block content %}
    <h1>GitLab Access Token</h1>
    {% if token_saved %}<p class="status">Token saved.</p>{% endif %}
    {% if git_credentials_configured is not none %}
        {% if git_credentials_configured %}
            <p class="status">Git credential store configured.</p>
        {% else %}
            <p class="error">Git credential setup failed: {{ git_error }}</p>
        {% endif %}
    {% endif %}
    {% if error %}<p class="error">{{ error }}</p>{% endif %}
    <p>The token will be stored in the shared workspace and used for Git clone.</p>
    <form method="post" action="/login/token">
        <label>Username
            <input type="text" name="username" value="{{ username }}" readonly>
        </label>
        <label>Token
            <input type="password" name="token" required>
        </label>
        <button type="submit">Save token and continue</button>
    </form>
{% endblock %}
