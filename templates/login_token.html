<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Provide GitLab Token</title>
    <style>
        body { font-family: sans-serif; margin: 2rem; }
        .status { color: green; }
        .error { color: red; }
        form { display: flex; flex-direction: column; gap: 0.75rem; max-width: 320px; }
        label { display: flex; flex-direction: column; }
    </style>
</head>
<body>
    <h1>GitLab Access Token</h1>
    {% if token_saved %}<p class="status">Token saved.</p>{% endif %}
    {% if git_credentials_configured is not none %}
        {% if git_credentials_configured %}
            <p class="status">Git credential store configured.</p>
        {% else %}
            <p class="error">Git credential setup failed: {{ git_error }}</p>
        {% endif %}
    {% endif %}
    {% if error %}<p class="error">{{ error }}</p>{% endif %}
    <p>The token will be stored in the shared workspace and used for Git clone.</p>
    <form method="post" action="/login/token">
        <label>Username
            <input type="text" name="username" value="{{ username }}" readonly>
        </label>
        <label>Token
            <input type="password" name="token" required>
        </label>
        <button type="submit">Save token and continue</button>
    </form>
</body>
</html>
