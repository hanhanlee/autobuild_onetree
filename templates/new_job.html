{% extends "_layout.html" %}
{% block title %}Create Job{% endblock %}
{% block content %}
<h1>Create Job</h1>
{% if error %}<p class="error">{{ error }}</p>{% endif %}
<p><a href="/settings">GitLab token</a></p>
<div class="card">
    <form method="post" action="/new" style="display:grid;grid-template-columns:1fr;gap:0.75rem;max-width:560px;">
        <label>Recipe Template
            <input list="recipe-options" id="recipe-select" name="recipe_id" value="{{ recipe_id or '' }}" placeholder="Type to search (e.g. 2600)" required>
            <datalist id="recipe-options">
                {% for r in recipes or [] %}
                    <option value="{{ r.id }}" label="{{ r.display_name }}"></option>
                {% endfor %}
            </datalist>
        </label>
        <label>Note (optional)
            <textarea name="note" rows="3">{{ note or '' }}</textarea>
        </label>
        <button type="submit">Submit</button>
    </form>
</div>
<script>
    // recipes are rendered server-side in datalist; no extra JS needed
</script>
{% endblock %}
